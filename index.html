<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Here is some things about me." />
    <meta name="keywords" content="Cháº£ mong gÃ¬ chá»‰ mong giÃ u ðŸ¤£ðŸ¤£ðŸ¤£" />
    <link rel="stylesheet" href="style.css" />
    <script src="warpspeed.min.js"></script>
    <title>Thanh Cute</title>
  
  </head>
  <body>
   <div class="f1">
    <div class="main">
      <div id="background">
        <canvas
          id="bg_canvas"
          style="position: fixed; top: 0; left: 0; width: 100%; height: 100%"
        ></canvas>
        <script>
          var x = new WarpSpeed("bg_canvas",{"speed":3,"speedAdjFactor":0.03,"density":0.7,"shape":"circle","warpEffect":true,"warpEffectLength":6,"depthFade":true,"starSize":3,"backgroundColor":"hsl(263,45%,7%)"});
        </script>
      </div>

      <div class="bar-main">
        <a
          href="javascript:delay('https://fb.me/thanh.dz.az')"
          id="btn1"
          class="button1 bouncy"
          >Facebook</a
        >
        <a
          href="javascript:delay('https://github.com/thanhdzaz')"
          id="btn2"
          class="button1 bouncy"
          style="animation-delay: 0.07s"
          >Github</a
        >
        <a
          href="javascript:delay('https://www.youtube.com/channel/UCcPENE9Ts_LdKNfqiDN00xQ')"
          id="btn3"
          class="button1 bouncy"
          style="animation-delay: 0.14s"
          >YouTube</a
        >
        <a
          href="javascript:delay('mp3.html')"
          id="btn4"
          class="button1 bouncy"
          style="animation-delay: 0.21s"
          >About me</a
        >
      </div>
      <hr class="horizon" style="top: 0">
      <figure id="control_bar">
        <figcaption>Listen to "Mood Remix":</figcaption>
        <br>
        <audio id="audio_hie"
            controls
            src="music4.mp3">
           

                
        </audio> 
       
    </figure>
      <div class="avatar">
        <img src="hie.jpg" alt="" id="img" style="width: 250px;min-width: 250px;height: 250px;min-height: 250px;border-radius: 50%;transition: 0.1s;">
      </div>
      <div class="content">
        <table>
          <tr>
            <td colspan="3">Hi there I'm <span style="text-transform: uppercase">Thanh</span></td>
           
            
          </tr>
          <tr>
            <td colspan="3">I'm learning to be IT Engineer</td>
            
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </table>
      </div>
    </div>
    <hr class="horizon" style="bottom: 0;">
    <script>
      var rota = null;
      flag = true;
      i = 0;
      audio = document.getElementById("audio_hie");
      match = null;

      document.getElementById('img').onclick = () => {
        var bar = document.getElementById("control_bar");
        if (flag == true) {
          if (i < 1) {
            context = new AudioContext();
            match = context.createAnalyser();
            context.createMediaElementSource(audio).connect(match);
            match.connect(context.destination);
            i = 100;
          }
          bar.style.opacity = "1";
          bar.style.bottom = "100px";
          audio.play();
          loop();
          flag = false;
          rota = setInterval(rotator, 70);
        } else {
          clearInterval(rota);
          audio.pause();
          bar.style.opacity = "0";
          bar.style.bottom = "-100px";
          flag = true;
        }
      };
      function loop() {
        window.requestAnimationFrame(loop);

        fbc = new Uint8Array(match.frequencyBinCount);
        match.getByteFrequencyData(fbc);
        avg = fbc.reduce((a, b) => a + b, 0) / fbc.length;

        // document.body.style.backgroundColor =
        //   "rgb(" + 2 * avg + "," + avg + "," + avg * 1.2 + ")";
        // x.SPEED = (avg!==0) ? avg/7 : 3;  // incree Speed
        // console.log(x.SPEED);
        document.getElementById("img").style.boxShadow = "0 0 "+avg * 1.4 + "px rgb(167, 77, 77,0.8)";
        document.getElementsByClassName('horizon')[0].style.boxShadow = "0 0 "+avg * 1.2 + "px rgb(114, 245, 250)";
        document.getElementsByClassName('horizon')[1].style.boxShadow = "0 0 "+avg * 1.2 + "px rgb(114, 245, 250)";
        // document.getElementById('audio_hie').style.boxShadow = "0 0 "+avg * 1 + "px rgb(114, 245, 250)";
        // document.getElementById("img").style.height = avg * 5 + "px";
      }
      var hie = true;
      var deg = 0;
      function rotator() {
        var div = document.getElementById("img");
        deg = deg + 1;

        if (audio.paused) {
          clearInterval(rota);
          hie = !hie;
          flag = !flag;
        } else {
          if (hie == false) {
            console.log("haha");
            rota = setInterval(rotator, 70);
            hie = !hie;
          }
        }
        div.style.webkitTransform = "rotate(" + deg + "deg)";
        div.style.mozTransform = "rotate(" + deg + "deg)";
        div.style.msTransform = "rotate(" + deg + "deg)";
        div.style.oTransform = "rotate(" + deg + "deg)";
        div.style.transform = "rotate(" + deg + "deg)";
        // console.log(deg);
      }
    </script>
    <script src="main.js"></script>
  </div>

  <div class="f2">

  </div>
  </body>
</html>
